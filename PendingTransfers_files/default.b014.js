function ResizeMainAreas(){var windowWidth=$(window).width(),windowHeight=$(window).height(),minWidth=1e3,minHeight=800,myBody=$("body"),collapseThumb=$(".collapseThumb"),divSidebar=$(".sidebarContainer"),divMainContent=$("#divMainContent"),content=$("#content"),divSidebarHeader=$("#divSidebarHeader"),divSidebarContent=$("#divSidebarContent"),divGridHolder=$(".gridHolder"),allGrid=$("#allGrid"),divGridSummary=$("#divGridSummary"),divGridActionBar=$("#divGridActionBar"),divPager=$(".gridPager"),divGridHeaderContainScroll=$("#divGridHeaderContainScroll"),divDottedLine=$("#divDottedLine"),main_scroller=$("#main_scroller"),total_container=$(".total-container"),divMainGridArea=$("#divMainGridArea"),divGridContent=$("#divGridContent"),advertiseArea=$(".advertiseArea"),iPagerHeight=divPager.css("display")=="none"?0:divPager.outerHeight(),contentWidth=content.outerWidth(),sidebarWidth=0,sidebarStatus,bVertScroll,curOverflowX,curOverflowY,copyRightObj,copyRightHeight,newPos,adMinHeight,checkHeight,gridHeight,gridWidth,sidebarContentHeight,showListOffers,gridTop;divSidebar&&divSidebar.length>0&&(sidebarStatus=divSidebar.css("display"),sidebarStatus!="none"&&(sidebarWidth=divSidebar.outerWidth()));var thumbWidth=collapseThumb.outerWidth(),mainContWidth=contentWidth-sidebarWidth,contentPosition=content.position(),contentBottom=parseInt(content.css("margin-bottom")),contentTop=parseInt(content.css("margin-top")),contPosTop=contentPosition.top;Env.is_ie&&Env.minor<=7&&(contPosTop=contPosTop+20),total_container&&total_container.length>0&&(minWidth=parseInt(total_container.css("min-width")),minHeight=parseInt(total_container.css("min-height"))+$("header").outerHeight(!0)),bVertScroll=!1,myBody&&(curOverflowX=myBody.css("overflow-x"),curOverflowY=myBody.css("overflow-y"),windowWidth<minWidth?curOverflowX=="hidden"&&myBody.css("overflow-x","visible"):curOverflowX!="hidden"&&myBody.css("overflow-x","hidden"),windowHeight<minHeight?(bVertScroll=!0,windowHeight=windowHeight<minHeight?minHeight:windowHeight,curOverflowY=="hidden"&&myBody.css("overflow-y","visible")):curOverflowY!="hidden"&&myBody.css("overflow-y","hidden")),copyRightObj=$(".copyright"),copyRightHeight=copyRightObj.height(),bVertScroll?(newPos=windowHeight-copyRightHeight,copyRightObj.css("top",newPos+"px")):copyRightObj.css("top")!="auto"&&copyRightObj.css("top",""),ZoomPercent()!=1&&mainContWidth--,divMainContent.outerWidth(mainContWidth),adMinHeight=0,advertiseArea&&advertiseArea.length>0&&(adMinHeight=$(advertiseArea.children()[0]).outerHeight()+1),checkHeight=windowHeight-(contPosTop+contentBottom+contentTop),gridHeight=checkHeight-(divGridActionBar.outerHeight()+divGridSummary.outerHeight()+iPagerHeight+adMinHeight+1),divSidebar.outerHeight(checkHeight),divMainContent.outerHeight(checkHeight),collapseThumb.outerHeight(checkHeight-divGridActionBar.outerHeight()),gridWidth=divMainContent.outerWidth()-collapseThumb.outerWidth(),divMainGridArea.outerWidth(gridWidth),sidebarContentHeight=checkHeight-(divSidebarHeader.outerHeight()+1),divSidebarContent.height(sidebarContentHeight);if(main_scroller){var scrollChildWidth=$("#main_scroller table").width(),scrollChildHeight=$("#main_scroller table").outerHeight(),iHeaderHeight=divGridHeaderContainScroll&&divGridHeaderContainScroll.length>0?divGridHeaderContainScroll.outerHeight():0,scrollWidth=mainContWidth-thumbWidth,scrollHeight=gridHeight-iHeaderHeight,newAdHeight=gridHeight-(iHeaderHeight+scrollHeight);scrollHeight>scrollChildHeight+19&&advertiseArea&&advertiseArea.length>0?(showListOffers=$(".showListOffers"),scrollChildHeight==null||scrollChildHeight==0?(scrollHeight=0,gridHeight=0):scrollWidth<scrollChildWidth?(scrollHeight=scrollChildHeight+19,gridHeight=scrollHeight+23):(scrollHeight=scrollChildHeight,gridHeight=scrollHeight+23),newAdHeight=checkHeight-(divGridActionBar.outerHeight()+divGridSummary.outerHeight()+iPagerHeight+gridHeight+2)):newAdHeight="100%",divGridHolder.outerHeight(gridHeight),allGrid.outerHeight(gridHeight),main_scroller.outerWidth(scrollWidth),main_scroller.outerHeight(scrollHeight),advertiseArea&&advertiseArea.length>0&&advertiseArea.outerHeight(newAdHeight),gridTop=$(".gridArea").position().top,divDottedLine.css("top",gridTop+divGridSummary.outerHeight()+"px")}else divGridHolder.outerHeight(gridHeight),allGrid.outerHeight(gridHeight);typeof ResizeSearchArea!="undefined"&&ResizeSearchArea(sidebarContentHeight)}function SpecialHoverOver(){var allRows=$(".listRow:not([set])"),scrollRows=$("#main_scroller table .listRow:not([set])"),domainDraggable=$(".domainDraggable:not([set])");allRows.attr("set","1"),domainDraggable.attr("set","1"),domainDraggable.draggable({appendTo:"body",containment:"window",cursorAt:{cursor:"move",top:12,left:75},helper:function(){var ret=$(this).clone(),parentRow=$(this).parent().parent(),divText=$(this).children().html(),rowChkbox,scrollRows,rowDomain,titleAtt;return parentRow&&parentRow.length>0&&(rowChkbox=parentRow.find(".listCheckBox"),rowChkbox&&rowChkbox.length>0&&(rowChkbox.is(":checked")?(scrollRows=$(".listCheckBox:checked"),scrollRows.length>1?divText=scrollRows.length+" domains":(rowDomain=parentRow.find("table tr td a"),rowDomain&&rowDomain.length>0&&(titleAtt=rowDomain.attr("title"),titleAtt!=null&&titleAtt!=""&&(divText=titleAtt)))):(rowDomain=parentRow.find("table tr td a"),rowDomain&&rowDomain.length>0&&(titleAtt=rowDomain.attr("title"),titleAtt!=null&&titleAtt!=""&&(divText=titleAtt))))),ret.html("<div style='width:100%;padding-top:5px;text-align:center;font-weight:bold;' >"+divText+"</div>"),ret.css("z-index","50"),ret.css("vertical-align","middle"),ret.css("height","24"),ret.css("width","150"),ret.css("opacity","0.7"),ret.css("background-color","#FFFFCC"),ret.css("border","solid 1px #FCDF7A"),ret},stop:function(){RefreshSession()}})}function SetFoldersDroppable(){var dropFolders=$("div[folder]").not('[folder="-1"]');dropFolders.droppable({hoverClass:"dropzone",accept:".domainDraggable",drop:function(event,ui){var dragObj=ui.draggable,selDomains=[],selFolder=$(this).attr("folder"),parentRow=dragObj.parent().parent(),rowChkbox,scrollRows;parentRow&&parentRow.length>0&&(rowChkbox=parentRow.find(".listCheckBox"),rowChkbox&&rowChkbox.length>0&&(rowChkbox.is(":checked")?(scrollRows=$(".listCheckBox:checked"),scrollRows.length>0&&scrollRows.each(function(){selDomains.push($(this).val())})):selDomains.push(rowChkbox.val()))),SendRequestDomainToFolder(selDomains,selFolder)}})}function UpdateCheckedRow(ctrl){var scrollRows=$("#main_scroller table .listRow"),currParentRow=$(ctrl).closest("tr.listRow"),iRowIndex;currParentRow!=null&&currParentRow.length>0&&(iRowIndex=scrollRows.index($(currParentRow[0])),iRowIndex<0||(ctrl.checked&&!$(scrollRows[iRowIndex]).hasClass("selectedRow")?$(scrollRows[iRowIndex]).addClass("selectedRow"):!ctrl.checked&&$(scrollRows[iRowIndex]).hasClass("selectedRow")&&$(scrollRows[iRowIndex]).removeClass("selectedRow")))}function SetAlphaPaging(){$(".pagn-content > li > a").click(function(){var curVal=$(this).attr("val"),input;return SetCurrentAlpha(curVal),input={},input.activeview=GetActiveView(),input.action="NAME",input.startDomain=curVal,input.addon="FALSE",SendRequestForDomainList(input),!1})}function SetCurrentAlpha(firstDomain){$(".activeAlpha").removeClass("activeAlpha");if(firstDomain.length>0){var sFirstChar=firstDomain.substring(0,1),searchDivs=null;switch(sFirstChar){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":searchDivs=$(".pagn-content > li > a[val='0']");break;default:searchDivs=$(".pagn-content > li > a[val='"+sFirstChar+"']")}searchDivs!=null&&searchDivs.length>0&&searchDivs.closest("li").addClass("activeAlpha")}}function ResetFilter(){var input={};input.activeview=GetActiveView(),input.action="FIRST",input.resetSearch="1",input.addon="FALSE",SendRequestForDomainList(input)}function GetNextBunch(ctrl){var input={};input.activeview=GetActiveView(),input.action="NEXT",input.addon="TRUE",FastballFromCtrl(ctrl),SendRequestForDomainList(input)}function GetFolderView(ctrl){var folderAtt=ctrl.getAttribute("folder"),folderNameAtt=ctrl.getAttribute("folderName"),input={};input.activeview=GetActiveView(),input.resetSearch="1",input.folder=folderAtt,input.folderName=folderNameAtt,input.action="FIRST",FastballFromCtrl(ctrl),SendRequestForDomainList(input)}function GetAccountExecView(ctrl){var folderAtt=ctrl.getAttribute("folder"),folderNameAtt=ctrl.getAttribute("folderName"),shopperAtt=ctrl.getAttribute("shopper"),input={};input.activeview=GetActiveView(),input.folder=folderAtt,input.folderName=folderNameAtt,input.shopper=shopperAtt,input.action="FIRST",input.resetSearch="1",FastballFromCtrl(ctrl),SendRequestForDomainList(input)}function GetProfileView(ctrl){var profileAtt=ctrl.getAttribute("profile"),profileNameAtt=ctrl.getAttribute("profileName"),input={};input.activeview=GetActiveView(),input.profile=profileAtt,input.profileName=profileNameAtt,input.action="FIRST",input.resetSearch="1",FastballFromCtrl(ctrl),SendRequestForDomainList(input)}function GetNextPage(ctrl){SetCurrentAlpha("");var input={};input.activeview=GetActiveView(),input.action="NEXT",FastballFromCtrl(ctrl),SendRequestForDomainList(input)}function RefreshList(){var input={};input.activeview=GetActiveView(),input.action="CURRENT",SendRequestForDomainList(input)}function SendRequestForDomainList(input){RefreshSession(),ShowWaitingDiv(loadGridText);var request="'request':'{0}'".format(StringifyObject(input));BaseWSCall("DomainList.asmx/GenerateList",request,GenerateListComplete,GenerateListError)}function GenerateListError(XMLHttpRequest,textStatus,errorThrown){HideWaitingDiv(),alert(errorThrown)}function UpdateAllGridHeight(){var windowHeight=$(window).height(),content=$("#content"),divGridActionBar=$("#divGridActionBar"),divGridSummary=$("#divGridSummary"),divPager=$(".gridPager"),allGrid=$("#allGrid"),iPagerHeight=divPager.css("display")=="none"?0:divPager.outerHeight(),contentBottom=parseInt(content.css("margin-bottom")),contentTop=parseInt(content.css("margin-top")),contentPosition=content.position(),checkHeight=windowHeight-(contentPosition.top+contentBottom+contentTop),gridHeight=checkHeight-(divGridActionBar.outerHeight()+divGridSummary.outerHeight()+iPagerHeight);allGrid.height(gridHeight)}function UpdateSelectedIDWithSelCount(ctrl){if(bAllowCheckEvent){bUpdatingSelectCount=!0;var updateXml=Validation.buildParamNodeListStartTag(),isChecked=ctrl.checked?"true":"false",eligibleActionList=ctrl.getAttribute("itemStatus");updateXml+='<REQUEST type="'+GetActiveView()+'" >',updateXml+='<SELECTION resource="'+ctrl.value+'" checked="'+isChecked+'" type="DOMAIN" actionList="'+eligibleActionList+'" />',updateXml+="</REQUEST>",updateXml+=Validation.buildParamNodeListEndTag(),UpdateSelectResourcesWS(updateXml)}}function UpdateGridLocations(){var gridScroller=$(".main_scroller"),scrollLeft,scrollTop;gridScroller&&(scrollLeft=gridScroller.scrollLeft(),scrollTop=gridScroller.scrollTop(),UpdateNewHeaderPos(scrollLeft,scrollTop))}function CalcGridHeight(isfiltered){var sidebarWidth,divSidebar,sidebarStatus,showListOffers,newAdHeight;bIsfiltered=isfiltered;var content=$("#content"),collapseThumb=$(".collapseThumb"),divGridSummary=$("#divGridSummary"),divGridActionBar=$("#divGridActionBar"),divPager=$(".gridPager"),divGridHolder=$(".gridHolder"),allGrid=$("#allGrid"),divGridHeaderContain=$("#divGridHeaderContainScroll"),main_scroller=$("#main_scroller"),iPagerHeight=divPager.css("display")=="none"?0:divPager.outerHeight(),minWidth=1e3,minHeight=800,total_container=$(".total-container");total_container&&total_container.length>0&&(minWidth=parseInt(total_container.css("min-width")),minHeight=parseInt(total_container.css("min-height"))+$("header").outerHeight(!0));if(divGridHolder&&divGridHeaderContain&&main_scroller){sidebarWidth=0,divSidebar=$(".sidebarContainer"),divSidebar&&divSidebar.length>0&&(sidebarStatus=divSidebar.css("display"),sidebarStatus!="none"&&(sidebarWidth=divSidebar.outerWidth()));var contentPosition=content.position(),contentBottom=parseInt(content.css("margin-bottom")),contentTop=parseInt(content.css("margin-top")),windowHeight=$(window).height(),iHeaderHeight=divGridHeaderContain.outerHeight(),thumbWidth=collapseThumb.outerWidth(),contentWidth=content.outerWidth(),mainContWidth=contentWidth-sidebarWidth,scrollChildWidth=$("#main_scroller table").width(),scrollChildHeight=$("#main_scroller table").height(),scrollWidth=mainContWidth-thumbWidth,advertiseArea=$(".advertiseArea"),adMinHeight=0;advertiseArea&&advertiseArea.length>0&&(adMinHeight=$(advertiseArea.children()[0]).outerHeight()+1);var iTotalWidth=divGridHolder.outerWidth(),divMainContent=$("#divMainContent"),collapseThumb=$(".collapseThumb"),mainContWidth=divMainContent.outerWidth(),thumbWidth=collapseThumb.outerWidth();windowHeight=windowHeight<minHeight?minHeight:windowHeight;var iCalcWidth=iTotalWidth,checkHeight=windowHeight-(contentPosition.top+contentBottom+contentTop),gridHeight=checkHeight-(divGridActionBar.outerHeight()+divGridSummary.outerHeight()+iPagerHeight+adMinHeight+1),scrollHeight=gridHeight-iHeaderHeight;scrollHeight>scrollChildHeight+19&&advertiseArea&&advertiseArea.length>0?(showListOffers=$(".showListOffers"),scrollChildHeight==null||scrollChildHeight==0?isfiltered?(scrollHeight=0,gridHeight=50):(scrollHeight=0,gridHeight=0):scrollWidth<scrollChildWidth?(scrollHeight=scrollChildHeight+19,gridHeight=scrollHeight+23):(scrollHeight=scrollChildHeight,gridHeight=scrollHeight+23),newAdHeight=checkHeight-(divGridActionBar.outerHeight()+divGridSummary.outerHeight()+iPagerHeight+gridHeight+2),advertiseArea&&advertiseArea.length>0&&advertiseArea.height(newAdHeight)):advertiseArea&&advertiseArea.length>0&&advertiseArea.css("height","100%"),divGridHolder.outerHeight(gridHeight),allGrid.outerHeight(gridHeight),main_scroller.height(scrollHeight),main_scroller.width(iCalcWidth)}}function SetupScroll(){$(".main_scroller").scroll(function(e){var iNewLeftPos=e.target.scrollLeft,iNewTopPos=e.target.scrollTop,divListPopup,divFilterPopup;UpdateNewHeaderPos(iNewLeftPos,iNewTopPos),divListPopup=$("#divListPopup"),divFilterPopup=$("#divFilterPopup");if(divListPopup&&divListPopup.length>0&&divListPopup.is(":sf-context(open)")){var scrollHeight=$(".main_scroller").height(),scrollWidth=$(".main_scroller").width(),anchorObj=divListPopup.sfContext("anchor"),anchorPos=anchorObj.position(),anchorWidth=anchorObj.width(),hasScroll=MainScrollerHasScroll(),checkRight=scrollWidth-((hasScroll.vertical?15:0)+anchorWidth),checkBottom=scrollHeight-(hasScroll.horizontal?15:0);anchorPos.left<0||anchorPos.top<0||anchorPos.left>checkRight||anchorPos.top>checkBottom?divListPopup.sfContext("close"):divListPopup.sfContext("reposition")}else divFilterPopup&&divFilterPopup.length>0&&divFilterPopup.is(":sf-context(open)")&&divFilterPopup.sfContext("close")})}function UpdateNewHeaderPos(newLeft){var divGridHeaderContain=GDEvent.get("divGridHeaderContainScroll"),divScrollPager,scrollLeft;divGridHeaderContain&&(divGridHeaderContain.style.left=0-newLeft+"px"),divScrollPager=$("#divScrollPager"),scrollLeft=$(".main_scroller").scrollLeft(),divScrollPager.css("left",scrollLeft+"px")}function CheckHeaders(){var iSpanCounter=0,columnHolder;iSpanCounter=CheckHeaderCells($("#scrollHeaderRow td.checkheadercell, #scrollHeaderRow td.headercellpadleft"),iSpanCounter),alSpans[iSpanCounter].width="auto",iSpanCounter++,columnHolder=$("#divGridHeaderContainScroll"),$(".draggableColumn").draggable({axis:"x",helper:function(){var ret=$(this).clone(),curWidth=$(this).width()-10;return ret.removeClass("draggableColumn"),ret.addClass("movingColumn"),ret.css("z-index","50"),ret.css("vertical-align","middle"),ret.css("height","24"),ret.css("top","0px"),ret.css("padding-top","5px"),ret.css("padding-left","5px"),ret.css("width","auto"),ret.css("opacity","0.8"),ret.css("background-color","#BCBCBC"),ret},start:function(){},drag:function(event,uiObj){var colIndexes=GetDraggablePosition(uiObj.helper,$(uiObj.helper.context)),divDottedLine,bValid;if(colIndexes.from>-1&&colIndexes.to>-1){divDottedLine=GDEvent.get("divDottedLine"),bValid=IsValidColumnDrop(colIndexes);if(bValid){var iGridLeft=0,iColumnIndex=colIndexes.to,dragColumns=$(".draggableColumn");colIndexes.to>colIndexes.from&&iColumnIndex++,iGridLeft=iColumnIndex==dragColumns.length?$(dragColumns[iColumnIndex-1]).offset().left+$(dragColumns[iColumnIndex-1]).width()+15:$(dragColumns[iColumnIndex]).offset().left-5,divDottedLine.style.display="",divDottedLine.style.left=iGridLeft-2+"px"}else divDottedLine.style.display="none"}},stop:function(event,uiObj){var divDottedLine,colIndexes,bValid;RefreshSession(),divDottedLine=GDEvent.get("divDottedLine"),divDottedLine.style.display="none",colIndexes=GetDraggablePosition(uiObj.helper,$(uiObj.helper.context)),colIndexes.from>-1&&colIndexes.to>-1&&(bValid=IsValidColumnDrop(colIndexes),bValid&&ReorderColumns(event,uiObj))}})}function GetDraggablePosition(uiHelper,uiDragObj){for(var middleOfDrag=uiHelper.position().left+uiHelper.width()/2,bMoveLeft=uiHelper.position().left<uiDragObj.position().left,dragColumns=$(".draggableColumn"),iFromIndex=-1,iToIndex=-1,iCounter=0;iCounter<dragColumns.length;iCounter++){var currControl=dragColumns[iCounter],bIsSame=$(currControl).is(uiDragObj),iLeft=$(currControl).position().left,iWidth=$(currControl).width()+10,iMiddleCtrl=iLeft+iWidth/2;bIsSame&&(iFromIndex=iCounter),middleOfDrag>iLeft&&middleOfDrag<iLeft+iWidth?bMoveLeft?bIsSame?iToIndex=iCounter:middleOfDrag>iLeft&&middleOfDrag<iMiddleCtrl?iToIndex=iCounter:middleOfDrag>iMiddleCtrl&&middleOfDrag<iLeft+iWidth&&iCounter<dragColumns.length&&(iToIndex=iCounter+1):bIsSame?iToIndex=iCounter:middleOfDrag>iLeft&&middleOfDrag<iMiddleCtrl&&iCounter>0?iToIndex=iCounter-1:middleOfDrag>iMiddleCtrl&&middleOfDrag<iLeft+iWidth&&(iToIndex=iCounter):iCounter+1==dragColumns.length&&middleOfDrag>iLeft+iWidth?iToIndex=iCounter:iCounter==0&&middleOfDrag<iLeft&&(iToIndex=iCounter)}return{from:iFromIndex,to:iToIndex,moveleft:bMoveLeft}}function IsValidColumnDrop(colIndexes){var result=!1,iColumnIndex=colIndexes.to,dragColumns;if(iColumnIndex==colIndexes.from)result=!1;else{colIndexes.to>colIndexes.from&&iColumnIndex++,dragColumns=$(".draggableColumn");if(dragColumns&&iColumnIndex<=dragColumns.length){var iGridLeft=0,gridArea=$("#main_scroller"),gridOffset=gridArea.offset(),gridWidth=gridArea.width(),gridHeight=gridArea.height();iGridLeft=iColumnIndex==dragColumns.length?$(dragColumns[iColumnIndex-1]).offset().left+$(dragColumns[iColumnIndex-1]).width()+15:$(dragColumns[iColumnIndex]).offset().left-5;if(gridOffset.left+gridWidth>iGridLeft){var contObj=$(gridArea.children()[0]),contWidth=contObj.width(),contHeight=contObj.height(),bHasVScroll=contHeight>gridHeight,bHasHScroll=contWidth>gridWidth,lineHeight=$("#allGrid").outerHeight();bHasVScroll&&(lineHeight=lineHeight-15),$(divDottedLine).height(lineHeight),result=!bHasVScroll||gridOffset.left+gridWidth-15>iGridLeft?!0:!1}else result=!1}}return result}function ReorderColumns(evt,uiObj){var iStartIndex=0,iEndIndex=0,colIndexes=GetDraggablePosition(uiObj.helper,$(uiObj.helper.context)),lockedHeaderRow,dataRows,iCount,row1,row2,iRowCount,aColIDs;colIndexes.from>-1&&colIndexes.to>-1&&(iStartIndex=colIndexes.from+2,iEndIndex=colIndexes.to+2);if(iStartIndex!=iEndIndex){iStartIndex++,iEndIndex++,lockedHeaderRow=$("#scrollHeaderRow"),dataRows=$(".main_scroller table tr.listRow");if(iStartIndex<iEndIndex)for(iCount=iStartIndex;iCount<iEndIndex;iCount++){for(row1=lockedHeaderRow.find(">td:nth-child("+iCount+")"),row2=lockedHeaderRow.find(">td:nth-child("+(iCount+1)+")"),iRowCount=0;iRowCount<row1.length;iRowCount++)SwapColumns(row1[iRowCount],row2[iRowCount]);for(row1=dataRows.find(">td:nth-child("+iCount+")"),row2=dataRows.find(">td:nth-child("+(iCount+1)+")"),iRowCount=0;iRowCount<row1.length;iRowCount++)SwapColumns(row1[iRowCount],row2[iRowCount])}else for(iCount=iStartIndex;iCount>iEndIndex;iCount--){for(row1=lockedHeaderRow.find(">td:nth-child("+iCount+")"),row2=lockedHeaderRow.find(">td:nth-child("+(iCount-1)+")"),iRowCount=0;iRowCount<row1.length;iRowCount++)SwapColumns(row1[iRowCount],row2[iRowCount]);for(row1=dataRows.find(">td:nth-child("+iCount+")"),row2=dataRows.find(">td:nth-child("+(iCount-1)+")"),iRowCount=0;iRowCount<row1.length;iRowCount++)SwapColumns(row1[iRowCount],row2[iRowCount])}dragColumns=$(".draggableColumn"),aColIDs=[],dragColumns.each(function(){var tblParent=$(this).closest("table"),aFieldID=tblParent.attr("fieldid"),bIsSame=$(this).is(uiObj.draggable),bIsDragger=$(this).is(uiObj.helper);(bIsSame||!bIsDragger)&&aColIDs.push(aFieldID)}),UpdateColumnOrderWS(aColIDs)}}function SwapColumns(colA,colB){if(colA&&colB){var aparent=colA.parentNode,asibling=colA.nextSibling===colB?colA:colA.nextSibling,colAClass=colA.className,colBClass=colB.className;colB.parentNode.insertBefore(colA,colB),aparent.insertBefore(colB,asibling),colB.className=colAClass,colA.className=colBClass}}function CheckHeaderCells(headerCells,iSpanCounter){var cellPaddingLeft=5,iCellCounter,currentCell,grabID,jGrabObj,currentWidth;if(headerCells&&headerCells.length>0)for(iCellCounter=0;iCellCounter<headerCells.length;iCellCounter++){currentCell=headerCells[iCellCounter];if(currentCell.className=="checkheadercell"||currentCell.className=="headercellpadleft"){var checkSpan=alSpans[iSpanCounter],sSelector="#"+currentCell.id+" > table tr td .bk_grid_rightgrab_a",grabBox=$(sSelector);grabBox.length>0&&(grabID=grabBox.attr("id"),jGrabObj=GDEvent.get(grabID),grabBox.draggable({start:function(event,ui){ResizeHeaders($(this),event),ui.position.left=0},drag:function(event,ui){ResizeHeaders($(this),event),ui.position.left=0},stop:function(event,ui){var testWidth,updateWidth,iTotalWidth,iCalcWidth;RefreshSession();var tblParent=$(this).closest("table"),colSpanNum=parseInt($(this).attr("columnSpan")),divBaseParent=$(this).closest(".gridHeaderDiv"),mainScroll=$(".main_scroller"),divGridHolder=$(".gridHolder"),scrollLeft=mainScroll.scrollLeft();if(tblParent){var evtClientX=event.originalEvent.clientX,aFieldID=tblParent.attr("fieldid"),tblLeft=tblParent.position().left,baseLeft=$(divBaseParent[0]).offset().left,dragWidth=parseInt($(this).width()),newWidth=evtClientX-(tblLeft+baseLeft)+dragWidth/2;tblParent.width(newWidth),testWidth=tblParent.width(),updateWidth=0,updateWidth=Env.is_ie&&Env.minor>=9?testWidth-1-cellPaddingLeft:testWidth-1-cellPaddingLeft,alSpans[colSpanNum].width=updateWidth+"px",UpdateColumnSizeWS(aFieldID,newWidth)}CalcGridHeight(bIsfiltered),divGridHolder&&mainScroll&&(iTotalWidth=divGridHolder.outerWidth(),iCalcWidth=iTotalWidth,mainScroll.width(iCalcWidth),UpdateNewHeaderPos(mainScroll.scrollLeft(),mainScroll.scrollTop())),ui.position.left=0}},{axis:"x"}),grabBox.dblclick(function(){var colSpanNum,iRequestMaxWidth;RefreshSession();var jqObj=$(this),tblParent=jqObj.closest("table"),attValue=jqObj.attr("dblMax"),aFieldID=tblParent.attr("fieldid");attValue&&attValue!=""&&attValue!="0"&&(colSpanNum=parseInt(jqObj.attr("columnSpan")),iRequestMaxWidth=parseInt(attValue),tblParent.width(iRequestMaxWidth),iRequestMaxWidth=tblParent.width(),iRequestMaxWidth=Env.is_ie&&Env.minor>=9?iRequestMaxWidth-1-cellPaddingLeft:iRequestMaxWidth-1-cellPaddingLeft,alSpans[colSpanNum].width=iRequestMaxWidth+"px",UpdateColumnSizeWS(aFieldID,iRequestMaxWidth),CalcGridHeight())})),currentWidth=parseInt(currentCell.childNodes[0].getAttribute("width")),currentCell.style.borderLeft!=""?currentWidth=currentWidth-1-cellPaddingLeft:currentCell.className!="checkheadercell"&&(currentWidth=currentWidth-1-cellPaddingLeft),checkSpan.width=currentWidth+"px",iSpanCounter++}}return iSpanCounter}function ResizeHeaders(jqObj,evt){var tblParent=jqObj.closest("table"),divBaseParent=jqObj.closest(".gridHeaderDiv"),colSpanNum=parseInt(jqObj.attr("columnSpan")),mainScroll=$(".main_scroller"),scrollLeft=mainScroll.scrollLeft();if(tblParent){var minWidth=parseInt(tblParent.css("min-width")),evtClientX=evt.originalEvent.clientX,tblLeft=tblParent.position().left,baseLeft=$(divBaseParent[0]).offset().left,dragWidth=parseInt(jqObj.width()),newWidth=evtClientX-(tblLeft+baseLeft)+dragWidth/2;newWidth<minWidth&&(newWidth=minWidth),tblParent.width(newWidth)}}function ChangeSidebarStatus(){var divSidebar,lnkSidebar,input,sDataString;RefreshSession(),divSidebar=$("#divSidebar");if(divSidebar!=null&&divSidebar.length>0){var sidebarStatus=divSidebar.css("display"),actionBar=$(".data-grid-top-main"),bShowIt=!0;sidebarStatus=="none"?(divSidebar.css("display",""),actionBar.addClass("noleftside"),$("#divCollapseThumb").addClass("openThumb"),bShowIt=!0):(divSidebar.css("display","none"),actionBar.removeClass("noleftside"),$("#divCollapseThumb").removeClass("openThumb"),bShowIt=!1),lnkSidebar=$("#divCollapseThumb a.collapseThumbTab"),lnkSidebar.attr("data-content",bShowIt?sCollapseText:sExpandText),ResizeMainAreas(!1),input={},input.activeview=GetActiveView(),input.showsidebar=bShowIt,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/UpdateSidebarStatus",sDataString,UpdateSidebarStatusComplete,null)}}function UpdateSidebarStatusComplete(result){result.Success||result.ValidUser||GoToLogin()}function GetRowDomainID(ctrl){var rowID="",parentRow=$(ctrl).closest("tr.listRow"),selBox=parentRow.find(".listCheckBox");return rowID=selBox.val()}function OpenDomainDetail(ctrl){FastballFromCtrl(ctrl);var rowID=GetRowDomainID(ctrl);OpenDetailPageWithIdentifier(rowID)}function OpenDetailPageWithID(detailID){var newLocation="DomainDetails.aspx?domain="+detailID;window.location=addQueryStringArgs(newLocation,{refresh:!0,action:!0,ci:!0})}function OpenDetailPageWithIdentifier(detailIdentifier){var newLocation="DomainDetails.aspx?identifier="+detailIdentifier;window.location=addQueryStringArgs(newLocation,{refresh:!0,action:!0,ci:!0})}function OpenDetailPageWithIdAndParms(detailIdentifier,parms){var newLocation="DomainDetails.aspx?identifier="+detailIdentifier+parms;window.location=addQueryStringArgs(newLocation,{refresh:!0,action:!0,ci:!0})}function addQueryStringArgs(url,skip){url=String(url);if(url){var first=url.indexOf("?")<=0||url.indexOf("&")==0||url.indexOf("?")>0&&url.indexOf("&")>0&&url.indexOf("?")>url.indexOf("&"),newQStr=parseQuery(url),currQStr=parseQuery(window.location.search);$.each(currQStr,function(key,value){newQStr[key]||skip&&(!skip||skip[key])||(url=url+"&"+key+"="+encodeURIComponent(value))})}return url}function parseQuery(qstr){var query={},a,i,val,b;qstr=String(qstr);if(qstr){qstr.indexOf("?")<0||(qstr=qstr.substring(qstr.indexOf("?")+1,qstr.length));if(qstr!==""){a=qstr.split("&");for(i in a)val=String(a[i]),val&&(b=val.split("=",2),query[decodeURIComponent(b[0])]=decodeURIComponent(b[1]))}}return query}function SelectEntireView(){setTimeout("FirstCheck(true);",0)}function FirstCheck(bSelect){var updateXml=Validation.buildParamNodeListStartTag();updateXml+='<REQUEST type="'+GetActiveView()+'" >',updateXml+='<BASE selectView="true" />',updateXml+="</REQUEST>",updateXml+=Validation.buildParamNodeListEndTag(),bAllowCheckEvent=!1,UpdateCheckBoxes(bSelect),bAllowCheckEvent=!0,selectionCount=recordCount,UpdateSelectResourcesWS(updateXml)}function SelectAll(bSelect){setTimeout(function(){ClickCheckboxes(bSelect,!bSelect)},5)}function EnableAllCheckboxes(bDisabled){$(".listCheckBox").each(function(){bDisabled?$(this).parent().attr("disabled","disabled"):$(this).parent().removeAttr("disabled")})}function ClickCheckboxes(bSelect,resetActions){var updateXml,allListBox,iCount;for(bAllowCheckEvent=!1,updateXml=Validation.buildParamNodeListStartTag(),updateXml+='<REQUEST type="'+GetActiveView()+'" >',bSelect||(updateXml+='<BASE unSelectView="true" />'),allListBox=$(".listCheckBox"),iCount=0;iCount<allListBox.length;iCount++){var curControl=allListBox[iCount],bChecked=curControl.checked,isChecked=bSelect?"true":"false",eligibleActionList=curControl.getAttribute("itemStatus");bSelect&&!bChecked&&(updateXml+='<SELECTION resource="'+curControl.value+'" checked="'+isChecked+'" type="'+GetActiveView()+'" actionList="'+eligibleActionList+'" />')}UpdateCheckBoxes(bSelect),updateXml+="</REQUEST>",updateXml+=Validation.buildParamNodeListEndTag(),bAllowCheckEvent=!0,resetActions&&(arrEligibleCounts=arrBaseCounts.slice()),UpdateSelectResourcesWS(updateXml)}function UpdateCheckBoxes(bSelect){var checkem,scrollRows,iCount;if(bSelect){checkem=$(".listCheckBox:not(:checked)"),scrollRows=$("#main_scroller table .listRow:not(.selectedRow)"),scrollRows.addClass("selectedRow");if(Env.is_ie&&Env.minor<=8)for(checkem.prop("checked",!0),iCount=0;iCount<checkem.length;iCount++)AltCheckBoxClick(null,checkem[iCount]);else checkem.click()}else{checkem=$(".listCheckBox:checked"),scrollRows=$("#main_scroller table .listRow.selectedRow"),scrollRows.removeClass("selectedRow");if(Env.is_ie&&Env.minor<=8)for(checkem.prop("checked",!1),iCount=0;iCount<checkem.length;iCount++)AltCheckBoxClick(null,checkem[iCount]);else checkem.click()}}function ChangeAdvertiseState(){var input;RefreshSession();var showListOffers=$(".showListOffers"),closedListOffers=$(".closedListOffers"),advertiseArea=$(".advertiseArea"),divListOfferClick=$("#divListOfferClick"),bShowIt=!1;showListOffers.css("display")=="none"?(closedListOffers.css("display","none"),showListOffers.css("display",""),divListOfferClick.removeClass("uxicon-plus"),divListOfferClick.addClass("uxicon-minus"),bShowIt=!0):(showListOffers.css("display","none"),closedListOffers.css("display",""),divListOfferClick.removeClass("uxicon-minus"),divListOfferClick.addClass("uxicon-plus"),bShowIt=!1),CalcGridHeight(),input={},input.showlistoffer=bShowIt,UpdateShopperListPreferences(input,TestingResult,null)}function SearchGo(searchValue){SetCurrentAlpha("");var input={};input.activeview=GetActiveView(),input.startDomain=searchValue,input.action="NAME",SendRequestForDomainList(input)}function TestingResult(result){result.Success||result.ValidUser||GoToLogin()}function ShowColumnChooser(ctrl){var input={},sDataString;input.activeview=GetActiveView(),sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/GetCustomizedColumnsHTML",sDataString,function(result){ColumnRetrieveSuccess(result,ctrl)},null)}function ColumnRetrieveSuccess(result,caller){var jqObj=$(caller),divFilterPopup,newHTML,reqObj,reqWidth;result.Success?(divFilterPopup=GDEvent.get("divFilterPopup"),newHTML=result.HTML,Validation.updateInnerHTML(divFilterPopup,newHTML),reqObj=$(divFilterPopup),reqWidth=220,reqObj.sfContext({anchor:$(caller),width:reqWidth,positionIdeal:"ur",autoOpen:!0,onOpen:function(){BindFastballEventsForFilterPopup()},onClose:function(){$(this).sfContext("destroy")}})):result.ValidUser||GoToLogin()}function RestoreColDefault(){var input,sDataString;RefreshSession(),ShowWaitingDiv(updateColumnText),CloseFilterPopup(),input={},input.activeview=GetActiveView(),sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/RestoreColumnDefaultSettings",sDataString,GenerateListComplete,RestoreColumnDefaultSettingsFail)}function RestoreColumnDefaultSettingsFail(){HideWaitingDiv()}function UpdateColumnOrder(jqSel){var selBoxes=$(jqSel),sSelCol=[];selBoxes&&selBoxes.length>0&&(selBoxes.each(function(){sSelCol.push($(this).attr("colid"))}),CloseFilterPopup(),UpdateSelectedColumnsWS(sSelCol))}function UpdateColumnOrderWS(aSelCol){var input,sDataString;RefreshSession(),ShowWaitingDiv(updateColumnText),input={},input.activeview=GetActiveView(),input.columnlist=aSelCol,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/UpdateDomainScrollColumnOrder",sDataString,UpdateColumnOrderWSComplete,UpdateColumnOrderWSFail)}function UpdateColumnOrderWSComplete(result){HideWaitingDiv(),result.Success||result.ValidUser||GoToLogin()}function UpdateColumnOrderWSFail(){HideWaitingDiv()}function UpdateSelectedColumnsFail(){HideWaitingDiv()}function UpdateSelectedColumnsWS(sSelCol){var input,sDataString;RefreshSession(),input={},input.activeview=GetActiveView(),input.columnlist=sSelCol,sDataString="'request':'{0}'".format(StringifyObject(input)),ShowWaitingDiv(updateColumnText),BaseWSCall("SecondaryWS.asmx/UpdateSelectedColumns",sDataString,GenerateListComplete,UpdateSelectedColumnsFail)}function UpdateColumnSizeWS(sSelCol,newSize){var input={},sDataString;input.activeview=GetActiveView(),input.columnName=sSelCol,input.columnSize=newSize,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/UpdateColumnSize",sDataString,UpdateColumnSizeSuccess,UpdateColumnSizeError)}function UpdateColumnSizeSuccess(result){result.Success||result.ValidUser||GoToLogin()}function UpdateColumnSizeError(){}function UpdateSorting(ctrl){var input,sDataString;RefreshSession(),FastballFromCtrl(ctrl);var curView=GetActiveView(),currDir=ctrl.getAttribute("currdir"),currCol=ctrl.getAttribute("curcol");currDir&&currDir!=""||(currDir="desc"),currCol&&(input={},input.view=curView,input.sortcol=currCol,input.sortdir=currDir.toLowerCase()=="asc"?"desc":"asc",sDataString="'request':'{0}'".format(StringifyObject(input)),ShowWaitingDiv(loadGridText),BaseWSCall("DomainList.asmx/UpdateListOptions",sDataString,GenerateListComplete,GenerateListError))}function UpdateSelectResourcesWS(updateXML,callback,params,extra){RefreshSession();var sDataString="'request':'"+updateXML+"'";BaseWSCall("SecondaryWS.asmx/UpdateSelectedResources",sDataString,function(result){UpdateSelectedResourcesComplete(result),callback&&callback(params,extra)},null)}function UpdateSelectedResourcesComplete(result){bUpdatingSelectCount=!1;if(result.Success){var numselected=result.NumberSelected;selectionCount=parseInt(numselected),refreshActionButtonStatus(),UpdateSelectCount(selectionCount)}else result.ValidUser||GoToLogin()}function SimpleSearch(){var tbDomainContain=GDEvent.get("tbDomainContain"),input={};input.action="FIRST",input.startDomain=PlaceHolderTextBoxValue(tbDomainContain),input.activeview=GetActiveView(),SendRequestForDomainList(input)}function BeginBulkSearch(){var taBulkDomains=GDEvent.get("taBulkDomains"),sBulkNames=taBulkDomains.value,aSplitIt=sBulkNames.split(/[\r\n\t,;]/),input={},iCount,sName;for(input.action="FIRST",input.activeview=GetActiveView(),input.bulknames=[],iCount=0;iCount<aSplitIt.length;iCount++)sName=aSplitIt[iCount],sName!=""&&input.bulknames.push(sName);SendRequestForDomainList(input)}function ShowSearchPopup(bVisible,ctrl,flyoutselector){var input,sDataString,divSearchFlyout;bVisible?(input={},input.activeview=GetActiveView(),sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("DomainList.asmx/GetFilterSettings",sDataString,function(result){GetFilterSettingsComplete(result,ctrl,flyoutselector,GetActiveView())},null)):(divSearchFlyout=$("#divSearchFlyout"),divSearchFlyout.fadeOut(250))}function GetFilterSettingsComplete(result){if(result.Success)UpdateSearchControls(result.SearchXML),result.SavedSearchHTML&&result.SavedSearchHTML!=""&&(Validation.updateInnerHTML($(".searchListOverflow")[0],result.SavedSearchHTML),window.Fastball&&$(".searchManageContentDiv *[fastball=event]").Fastball("event"));else return result.ValidUser||GoToLogin(),!1}function ShowStandardSearch(tabNum){var divAdvancedSearch=GDEvent.get("divAdvancedSearch"),divBulkSearch=GDEvent.get("divBulkSearch"),divSavedSearches=GDEvent.get("divSavedSearches"),btnShowStandard=GDEvent.get("btnShowStandard"),btnShowBulk=GDEvent.get("btnShowBulk"),btnShowSaved=GDEvent.get("btnShowSaved"),sAnimateSize="350px",iGridHeight,searchHeight;if(tabNum==0){divAdvancedSearch&&(divAdvancedSearch.style.display=""),divBulkSearch&&(divBulkSearch.style.display="none"),divSavedSearches&&(divSavedSearches.style.display="none"),btnShowStandard&&$(btnShowStandard).addClass("active"),btnShowBulk&&$(btnShowBulk).removeClass("active"),btnShowSaved&&$(btnShowSaved).removeClass("active");var jqCtrl=$("#btnOptions"),ctrlPos=jqCtrl.offset(),topFlyout=ctrlPos?ctrlPos.top:0+jqCtrl.height(),iTestHeight=$(window).height()-topFlyout,iButtonSpace=96,iPadding=Env.canDoHTML5?34:24,iExtraSpace=iButtonSpace+iPadding;iTestHeight=iTestHeight<350?350:iTestHeight,iGridHeight=iTestHeight-iExtraSpace,$(".adv-search-scroll").css("max-height",iGridHeight+"px"),iTestHeight=$("#divSearchFlyout").height(),sAnimateSize=iTestHeight?iTestHeight.toString()+"px":"0px"}else tabNum==1?(divAdvancedSearch&&(divAdvancedSearch.style.display="none"),divBulkSearch&&(divBulkSearch.style.display=""),divSavedSearches&&(divSavedSearches.style.display="none"),btnShowStandard&&$(btnShowStandard).removeClass("active"),btnShowBulk&&$(btnShowBulk).addClass("active"),btnShowSaved&&$(btnShowSaved).removeClass("active"),sAnimateSize="350px"):tabNum==2&&(divAdvancedSearch&&(divAdvancedSearch.style.display="none"),divBulkSearch&&(divBulkSearch.style.display="none"),divSavedSearches&&(divSavedSearches.style.display=""),btnShowStandard&&$(btnShowStandard).removeClass("active"),btnShowBulk&&$(btnShowBulk).removeClass("active"),btnShowSaved&&$(btnShowSaved).addClass("active"),searchHeight=$(".searchListOverflow").height(),searchHeight=searchHeight>0?searchHeight+50:300,sAnimateSize=searchHeight.toString()+"px");$("#divSearchFlyout").animate({height:sAnimateSize},{duration:100,complete:function(){}})}function ShowFolderArea(ctrl){ShowSearchArea("divAllFolders",ctrl)}function ShowProfileArea(ctrl){ShowSearchArea("divAllProfiles",ctrl)}function ShowExecArea(ctrl){ShowSearchArea("divAllAccounts",ctrl)}function ShowSearchArea(sectionName,ctrl){var divAllFolders=GDEvent.get(sectionName),divSidebarContent;$(ctrl).hasClass("uxicon-plus")?(divAllFolders.style.display="",$(ctrl).removeClass("uxicon-plus"),$(ctrl).addClass("uxicon-minus")):(divAllFolders.style.display="none",$(ctrl).removeClass("uxicon-minus"),$(ctrl).addClass("uxicon-plus")),divSidebarContent=$("#divSidebarContent"),ResizeSearchArea(divSidebarContent.height())}function UpdateShopperListPreferences(input,sucessCallback,errorCallBack){var sDataString="'request':'{0}'".format(StringifyObject(input));BaseWSCall("SecondaryWS.asmx/UpdateShopperListPrefs",sDataString,sucessCallback,errorCallBack)}function SendRequestDomainToFolder(selDomains,selFolder){var requestObj={},request;requestObj.folder=selFolder,requestObj.domainids=selDomains,request="'request':'{0}'".format(StringifyObject(requestObj)),BaseWSCall("SecondaryWS.asmx/UpdateFoldersWithDomains",request,UpdateFoldersWithDomainsComplete,null)}function UpdateFoldersWithDomainsComplete(result){var butOptions,gt,gb;if(result.Status!="ValidationFail")if(result.Status=="FailSystem"){var failSysTitle=sFailSystemText,failSysEx=sFailSystemException,confirmTitle=sConfirmText,btnText=sOKButtonText,html='<div style="width:400px;height:90px;" ><div class="modal-h2" title="'+failSysTitle+'">'+failSysTitle+"</div>";result.StatusMessage&&(html+="<p>"+result.StatusMessage+"</p>"),result.ExceptionMessage&&(html+="<p><strong>"+failSysEx+"</strong>"+result.ExceptionMessage+"</p>"),html+="</div>",butOptions=[{text:btnText,onClick:function($sfDialog){$sfDialog.sfDialog("close")}}],activeModal=$(html).sfDialog({title:confirmTitle,buttons:butOptions,zIndex:1e3})}else gt=result.Kvp?result.Kvp.GrowlTitle:null,gb=result.Kvp?result.Kvp.GrowlBody:null,gt&&gb&&ShowStandardGrowlMessage(gt.toLocaleString(),gb.toLocaleString(),"success")}function ClearSearch(){var ddlFolders=typeof GetddlFolders!="undefined"?GetddlFolders():null,ddlTLDs=typeof GetddlTLDs!="undefined"?GetddlTLDs():null,ddlStatus=typeof GetddlStatus!="undefined"?GetddlStatus():null,ddlLocked=typeof GetddlLocked!="undefined"?GetddlLocked():null,ddlRegType=typeof GetddlRegType!="undefined"?GetddlRegType():null,ddlAutoRenew=typeof GetddlAutoRenew!="undefined"?GetddlAutoRenew():null,ddlProfiles=typeof GetddlProfiles!="undefined"?GetddlProfiles():null,divAdvancedSearch=GDEvent.get("divAdvancedSearch"),ddlNameContain=GDEvent.get("ddlNameContain"),tbEmailText=GDEvent.get("tbEmailText"),ddlEmailContain=GDEvent.get("ddlEmailContain"),tbOrderText=GDEvent.get("tbOrderText"),tbDomainText=GDEvent.get("tbDomainText"),tbNameserver=GDEvent.get("tbNameserver"),tbDomainContain=GDEvent.get("tbDomainContain"),taBulkDomains=GDEvent.get("taBulkDomains"),ddlDateType=GDEvent.get("ddlDateType"),firstSel;ddlFolders&&(ddlFolders.selectedIndex=0),ddlDateType&&(ddlDateType.selectedIndex=0,typeof DateTypeChange!="undefined"&&DateTypeChange()),ddlTLDs!=null&&(HasAttribute(ddlTLDs,"multiple")?(firstSel=$(ddlTLDs).find('option[value="-1"]'),$(ddlTLDs).find("option").attr("sel",""),firstSel.change()):ddlTLDs.selectedIndex=0),ddlStatus&&(ddlStatus.selectedIndex=0),ddlLocked&&(ddlLocked.selectedIndex=0),ddlRegType&&(ddlRegType.selectedIndex=0),ddlAutoRenew&&(ddlAutoRenew.selectedIndex=0),ddlProfiles&&(ddlProfiles.selectedIndex=0),ddlNameContain&&(ddlNameContain.selectedIndex=0),typeof minExpirationRange!="undefined"&&$("#tbDateFrom").val(minExpirationRange),typeof maxExpirationRange!="undefined"&&$("#tbDateTo").val(maxExpirationRange),tbDomainContain&&SetTextInPlaceTextBox(tbDomainContain,""),tbDomainText&&SetTextInPlaceTextBox(tbDomainText,""),ddlEmailContain&&(ddlEmailContain.selectedIndex=0),tbEmailText&&SetTextInPlaceTextBox(tbEmailText,""),tbOrderText&&(tbOrderText.value=""),tbNameserver&&SetTextInPlaceTextBox(tbNameserver,""),taBulkDomains&&SetTextInPlaceTextBox(taBulkDomains,"")}function AdvanceSearch(bResetSearch){var ddlFolders=typeof GetddlFolders!="undefined"?GetddlFolders():null,ddlTLDs=typeof GetddlTLDs!="undefined"?GetddlTLDs():null,ddlStatus=typeof GetddlStatus!="undefined"?GetddlStatus():null,ddlLocked=typeof GetddlLocked!="undefined"?GetddlLocked():null,ddlRegType=typeof GetddlRegType!="undefined"?GetddlRegType():null,ddlAutoRenew=typeof GetddlAutoRenew!="undefined"?GetddlAutoRenew():null,ddlProfiles=typeof GetddlProfiles!="undefined"?GetddlProfiles():null,tbEmailText=GDEvent.get("tbEmailText"),ddlEmailContain=GDEvent.get("ddlEmailContain"),tbOrderText=GDEvent.get("tbOrderText"),tbDomainText=GDEvent.get("tbDomainText"),ddlNameContain=GDEvent.get("ddlNameContain"),ddlDateType=GDEvent.get("ddlDateType"),tbDayExpire=GDEvent.get("tbDayExpire"),tbNameserver=GDEvent.get("tbNameserver"),tbDateTo=$("#tbDateTo"),tbDateFrom=$("#tbDateFrom"),sSelValue=ddlNameContain.options[ddlNameContain.selectedIndex].value,input={},sTLDList,firstSel,selOptions,iOptCounter;input.activeview=GetActiveView(),input.action="FIRST",input.resetSearch=bResetSearch?"1":"0",tbDomainText&&(sSelValue=="0"?input.startDomain=PlaceHolderTextBoxValue(tbDomainText):input.contains=PlaceHolderTextBoxValue(tbDomainText)),tbEmailText&&(ddlEmailContain.options[ddlEmailContain.selectedIndex].value=="0"?input.startEmail=PlaceHolderTextBoxValue(tbEmailText):input.containEmail=PlaceHolderTextBoxValue(tbEmailText)),tbOrderText&&(input.searchOrder=tbOrderText.value),ddlFolders!=null&&(input.folder=ddlFolders.options[ddlFolders.selectedIndex].value,input.folderName=ddlFolders.options[ddlFolders.selectedIndex].text),ddlStatus!=null&&(input.status=ddlStatus.options[ddlStatus.selectedIndex].value),ddlProfiles!=null&&(input.profile=ddlProfiles.options[ddlProfiles.selectedIndex].value,input.profileName=ddlProfiles.options[ddlProfiles.selectedIndex].text),ddlLocked!=null&&(input.lock=ddlLocked.options[ddlLocked.selectedIndex].value),ddlRegType!=null&&(input.regtype=ddlRegType.options[ddlRegType.selectedIndex].value),ddlAutoRenew!=null&&(input.autorenew=ddlAutoRenew.options[ddlAutoRenew.selectedIndex].value),ddlDateType!=null&&(input.expiretype=ddlDateType.options[ddlDateType.selectedIndex].value),tbDayExpire!=null&&(input.expiredays=tbDayExpire.value),tbDateTo&&tbDateTo.length>0&&(input.expireend=tbDateTo.val()),tbDateFrom&&tbDateFrom.length>0&&(input.expirestart=tbDateFrom.val());if(ddlTLDs!=null)if(HasAttribute(ddlTLDs,"multiple")){sTLDList="",firstSel=$(ddlTLDs).find('option[value="-1"]');if(firstSel!=null&&firstSel.length>0&&HasAttribute(firstSel[0],"sel"))sTLDList="-1";else for(selOptions=$(ddlTLDs).find("option[sel]"),iOptCounter=0;iOptCounter<selOptions.length;iOptCounter++)sTLDList+=$(selOptions[iOptCounter]).val()+"|";input.tldlist=sTLDList}else input.tldlist=ddlTLDs.options[ddlTLDs.selectedIndex].value;tbNameserver!=null&&(input.nameserver=PlaceHolderTextBoxValue(tbNameserver)),SendRequestForDomainList(input)}function ShowSaveSearch(bGetSettings){Validation.clearAllErrors(),$("#tbSaveSearch").val(""),$("#divSaveSearch").sfDialog({buttons:[{id:"btnSaveThatSearch",text:sOKButtonText,onClick:function(){SaveThisSearch(!1,bGetSettings)},attributes:{fastball:"event",event:"click",ci:"61550"}},{text:sCancelButtonText,cancel:!0}],onOpen:function(){window.Fastball&&$("#divSaveSearch").closest(".sf-dialog-modal").find("*[fastball=event]").Fastball("event")}})}function ShowDeleteSearch(searchId){$("#divDeleteSearch").sfDialog({buttons:[{id:"btnDeleteIt",text:sOKButtonText,onClick:function(){DeleteThisSearch(searchId)},attributes:{fastball:"event",event:"click",ci:"61549"}},{id:"btnStopit",text:sCancelButtonText,cancel:!0,onClick:function(){$("#divDeleteSearch").sfDialog("close")}}],onOpen:function(){window.Fastball&&$("#divDeleteSearch").closest(".sf-dialog-modal").find("*[fastball=event]").Fastball("event")}})}function BringUpSearch(searchID,ctrl){var input,sDataString;ShowWaitingDiv(loadGridText),input={},input.searchid=searchID,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/LoadSavedSearches",sDataString,function(result){LoadSavedSearchesComplete(result,ctrl)},null)}function LoadSavedSearchesComplete(result,ctrl){result.Success?(UpdateSearchControls(result.SearchXML),$(ctrl).closest("[data-mode=tabs]").sfContext("close").sfContext("selectTab",0),GenerateListComplete(result.ListResult)):(HideWaitingDiv(),result.ExceptionMessage?ShowBasicMessageModal("Error",result.ExceptionMessage):ShowBasicMessageModal("Error",result.StatusMessage))}function UpdateSearchControls(sXML){var ddlFolders=typeof GetddlFolders!="undefined"?GetddlFolders():null,ddlTLDs=typeof GetddlTLDs!="undefined"?GetddlTLDs():null,ddlStatus=typeof GetddlStatus!="undefined"?GetddlStatus():null,ddlLocked=typeof GetddlLocked!="undefined"?GetddlLocked():null,ddlRegType=typeof GetddlRegType!="undefined"?GetddlRegType():null,ddlAutoRenew=typeof GetddlAutoRenew!="undefined"?GetddlAutoRenew():null,ddlProfiles=typeof GetddlProfiles!="undefined"?GetddlProfiles():null,tbEmailText=GDEvent.get("tbEmailText"),ddlEmailContain=GDEvent.get("ddlEmailContain"),tbOrderText=GDEvent.get("tbOrderText"),tbDomainText=GDEvent.get("tbDomainText"),ddlNameContain=GDEvent.get("ddlNameContain"),ddlDateType=GDEvent.get("ddlDateType"),tbDayExpire=GDEvent.get("tbDayExpire"),tbDateFrom=$("#tbDateFrom"),tbDateTo=$("#tbDateTo"),tbNameserver=GDEvent.get("tbNameserver"),firstSel,bClearTLD,valueTags,iTagCount,tagType,tagValue,findTLD;ddlFolders&&(ddlFolders.value="-1"),ddlTLDs&&(HasAttribute(ddlTLDs,"multiple")?(firstSel=$(ddlTLDs).find('option[value="-1"]'),$(ddlTLDs).find("option").attr("sel",""),firstSel.change()):($(ddlTLDs).find('option[value!="-1"]').prop("selected",!1),$(ddlTLDs).find('option[value="-1"]').prop("selected",!0))),bClearTLD=!0,ddlStatus&&(ddlStatus.selectedIndex=0),ddlLocked&&(ddlLocked.selectedIndex=0),ddlRegType&&(ddlRegType.selectedIndex=0),ddlAutoRenew&&(ddlAutoRenew.selectedIndex=0),ddlProfiles&&(ddlProfiles.selectedIndex=0),ddlNameContain&&(ddlNameContain.selectedIndex=0),tbDomainText&&SetTextInPlaceTextBox(tbDomainText,""),tbNameserver&&SetTextInPlaceTextBox(tbNameserver,""),tbDateFrom&&tbDateFrom.length>0&&tbDateFrom.val(minExpirationRange),tbDateTo&&tbDateTo.length>0&&tbDateTo.val(maxExpirationRange),ddlEmailContain&&(ddlEmailContain.selectedIndex=0),ddlDateType&&(ddlDateType.selectedIndex=0,typeof DateTypeChange!="undefined"&&DateTypeChange()),tbDayExpire&&(tbDayExpire.value=""),tbEmailText&&SetTextInPlaceTextBox(tbEmailText,""),tbOrderText&&(tbOrderText.value=""),valueTags=Utilities.getTagsFromXML(sXML,"FILTER");if(valueTags!=null&&valueTags.length>0)for(iTagCount=0;iTagCount<valueTags.length;iTagCount++){tagType=valueTags[iTagCount].getAttribute("name"),tagValue=valueTags[iTagCount].childNodes[0].nodeValue;switch(tagType){case"TLD":ddlTLDs&&(HasAttribute(ddlTLDs,"multiple")?(bClearTLD&&($(ddlTLDs).find("option").removeAttr("sel"),bClearTLD=!1),findTLD=$(ddlTLDs).find('option[value="'+tagValue+'"]'),findTLD.attr("sel",""),findTLD.change()):($(ddlTLDs).find('option[value!="'+tagValue+'"]').prop("selected",!1),$(ddlTLDs).find('option[value="'+tagValue+'"]').prop("selected",!0)));break;case"STATUS":ddlStatus&&(ddlStatus.value=tagValue);break;case"LOCKED":ddlLocked&&(ddlLocked.value=tagValue);break;case"REGTYPE":ddlRegType&&(ddlRegType.value=tagValue);break;case"AUTORENEW":ddlAutoRenew&&(ddlAutoRenew.value=tagValue);break;case"NAMESERVER":tbNameserver&&(tbNameserver.value=tagValue);break;case"FOLDER":ddlFolders&&(ddlFolders.value=tagValue);break;case"PROFILE":ddlProfiles&&(ddlProfiles.value=tagValue);break;case"TEXT":ddlNameContain&&(ddlNameContain.value="0"),tbDomainText&&SetTextInPlaceTextBox(tbDomainText,tagValue);break;case"CONTAINS":ddlNameContain&&(ddlNameContain.value="1"),tbDomainText&&SetTextInPlaceTextBox(tbDomainText,tagValue);break;case"ORDERID":tbOrderText&&(tbOrderText.value=tagValue);break;case"EMAILCONTAINS":ddlEmailContain&&(ddlEmailContain.selectedIndex=1),tbEmailText&&SetTextInPlaceTextBox(tbEmailText,tagValue);break;case"EMAILSTARTS":ddlEmailContain&&(ddlEmailContain.selectedIndex=0),tbEmailText&&SetTextInPlaceTextBox(tbEmailText,tagValue);break;case"EXPIRETYPE":ddlDateType&&(ddlDateType.value=tagValue,typeof DateTypeChange!="undefined"&&DateTypeChange());break;case"EXPIRINGDAYS":tbDayExpire&&tbDayExpire.style.display!="none"&&(tbDayExpire.value=tagValue);break;case"EXPIRESTART":tbDateFrom&&tbDateFrom.length>0&&tbDateFrom.val(tagValue);break;case"EXPIREEND":tbDateTo&&tbDateTo.length>0&&tbDateTo.val(tagValue)}}}function SaveThisSearch(overrideIt,bGetSettings){var sTLDList,firstSel,selOptions,iOptCounter,tbSaveSearch,input,sDataString;Validation.clearAllErrors();var ddlFolders=typeof GetddlFolders!="undefined"?GetddlFolders():null,ddlTLDs=typeof GetddlTLDs!="undefined"?GetddlTLDs():null,ddlStatus=typeof GetddlStatus!="undefined"?GetddlStatus():null,ddlLocked=typeof GetddlLocked!="undefined"?GetddlLocked():null,ddlRegType=typeof GetddlRegType!="undefined"?GetddlRegType():null,ddlAutoRenew=typeof GetddlAutoRenew!="undefined"?GetddlAutoRenew():null,ddlProfiles=typeof GetddlProfiles!="undefined"?GetddlProfiles():null,tbEmailText=GDEvent.get("tbEmailText"),ddlEmailContain=GDEvent.get("ddlEmailContain"),tbOrderText=GDEvent.get("tbOrderText"),tbDomainText=GDEvent.get("tbDomainText"),ddlNameContain=GDEvent.get("ddlNameContain"),tbNameserver=GDEvent.get("tbNameserver"),ddlDateType=GDEvent.get("ddlDateType"),tbDayExpire=GDEvent.get("tbDayExpire"),tbDateFrom=$("#tbDateFrom"),tbDateTo=$("#tbDateTo"),iFolderID=ddlFolders.options[ddlFolders.selectedIndex].value,iStatus=ddlStatus.options[ddlStatus.selectedIndex].value,iLocked=ddlLocked.options[ddlLocked.selectedIndex].value,iRegType=ddlRegType.options[ddlRegType.selectedIndex].value,iAutoRenew=ddlAutoRenew?ddlAutoRenew.options[ddlAutoRenew.selectedIndex].value:-1,iProfileID=ddlProfiles.options[ddlProfiles.selectedIndex].value,sFolderName=ddlFolders.options[ddlFolders.selectedIndex].text,sProfileName=ddlProfiles.options[ddlProfiles.selectedIndex].text,nsValue=PlaceHolderTextBoxValue(tbNameserver),sSelValue=ddlNameContain.options[ddlNameContain.selectedIndex].value,sSearchType="contains";sSelValue=="0"&&(sSearchType="startDomain"),sTLDList="",firstSel=$(ddlTLDs).find('option[value="-1"]');if(firstSel!=null&&firstSel.length>0&&HasAttribute(firstSel[0],"sel"))sTLDList="-1";else for(selOptions=$(ddlTLDs).find("option[sel]"),iOptCounter=0;iOptCounter<selOptions.length;iOptCounter++)sTLDList+=$(selOptions[iOptCounter]).val()+"|";tbSaveSearch=GDEvent.get("tbSaveSearch"),ShowDuelWaitControl($("#divSaveSearch"),sProcessText),input={},input.override=overrideIt,input.searchName=tbSaveSearch.value,bGetSettings&&(input.resetSearch=!0,input.activeview=GetActiveView(),input.folder=iFolderID,input.folderName=sFolderName,input.profile=iProfileID,input.profileName=sProfileName,input.tldlist=sTLDList,input.status=iStatus,input.lock=iLocked,input.regtype=iRegType,input.autorenew=iAutoRenew,input.nameserver=nsValue,ddlDateType&&(input.expiretype=ddlDateType.options[ddlDateType.selectedIndex].value),tbDayExpire&&(input.expiredays=tbDayExpire.value),tbDateFrom&&tbDateFrom.length>0&&(input.expirestart=tbDateFrom.val()),tbDateTo&&tbDateTo.length>0&&(input.expireend=tbDateTo.val()),sSelValue=="0"?input.startDomain=PlaceHolderTextBoxValue(tbDomainText):input.contains=PlaceHolderTextBoxValue(tbDomainText)),sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/SaveSearch",sDataString,function(result){SaveSearchComplete(result,bGetSettings)},null)}function SaveSearchComplete(result,bGetSettings){HideDuelWaitControl($("#divSaveSearch"));if(result.Success){$("#divSaveSearch").sfDialog("close");var divSidebarOverflow=GetSavedSearchArea(),searchHTML=result.HTML;$(".searchManageContentDiv").replaceWith(searchHTML),window.Fastball&&$(".searchManageContentDiv *[fastball=event]").Fastball("event")}else result.Errors&&result.Errors.length>0?SaveSearchValidateErrors(result.Errors):result.ValidUser?result.SearchNameExist?$("<div>"+sDupeDescription+"</div>").sfDialog({veil:$("#divSaveSearch"),buttons:[{id:"btnContinue",text:sOKButtonText,onClick:function(){$sfDialog.sfDialog("close"),SaveThisSearch(!0,bGetSettings)}},{id:"btnStopit",text:sCancelButtonText,cancel:!0,onClick:function(){$sfDialog.sfDialog("close")}}]}):($("#divSaveSearch").sfDialog("close"),result.ExceptionMessage&&result.ExceptionMessage!=""?ShowBasicMessageModal("Save Search Error",result.ExceptionMessage):ShowBasicMessageModal("Save Search Error",result.StatusMessage)):GoToLogin()}function SaveSearchValidateErrors(aErrors){for(var iCounter=0;iCounter<aErrors.length;iCounter++){var errorIndex=aErrors[iCounter].Index,errorField=aErrors[iCounter].Field,errorType=aErrors[iCounter].ErrorType,errorMessage=aErrors[iCounter].Message;Validation.raiseError("tbSaveSearch",errorMessage)}$("#divSaveSearch").sfDialog("resize")}function DeleteThisSearch(searchID){var input,sDataString;$("#divDeleteSearch").sfDialog("close"),ShowWaitingDiv(loadGridText),input={},input.searchid=searchID,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/DeleteSaveSearch",sDataString,DeleteSaveSearchComplete,null)}function DeleteSaveSearchComplete(result){HideWaitingDiv();if(result.Success){var divSidebarOverflow=GetSavedSearchArea(),searchHTML=result.HTML;$(".searchManageContentDiv").replaceWith(searchHTML),window.Fastball&&$(".searchManageContentDiv *[fastball=event]").Fastball("event")}else result.ValidUser?result.ExceptionMessage?ShowBasicMessageModal("Error",result.ExceptionMessage):ShowBasicMessageModal("Error",result.StatusMessage):GoToLogin()}function ShowSelected(){var input,sDataString;ShowWaitingDiv(loadGridText),input={},input.activeview=GetActiveView(),sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("DomainList.asmx/ShowSelectedSearch",sDataString,GenerateListComplete,GenerateListError)}function LaunchEditFolderModal(){var folderId=GetAttributeFromReferObj("folder"),sFolderCall;folderId!=""&&(sFolderCall=editFolderJS.replace("{XX}",folderId),setTimeout(sFolderCall,0))}function LaunchDeleteFolderModal(){var folderId=GetAttributeFromReferObj("folder"),sFolderCall;folderId!=""&&(sFolderCall=deleteFolderJS.replace("{XX}",folderId),setTimeout(sFolderCall,0))}function LaunchEditProfileModal(){var profileId=GetAttributeFromReferObj("profile"),sFolderCall;profileId!=""&&(sFolderCall=editProfileJS.replace("{XX}",profileId),setTimeout(sFolderCall,0))}function LaunchDeleteProfileModal(){var profileId=GetAttributeFromReferObj("profile"),sFolderCall;profileId!=""&&(sFolderCall=deleteProfileJS.replace("{XX}",profileId),setTimeout(sFolderCall,0))}function GetAttributeFromReferObj(attName){var folderId="",folderCover;return referObj&&(folderCover=referObj.parentNode,folderCover&&(folderId=$(folderCover).attr(attName))),folderId}function ShowManagePopup(ctrl){var rowID,input,sDataString;FastballFromCtrl(ctrl),rowID=GetRowDomainID(ctrl),input={},input.domainid=rowID,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/GetDomainManageHTML",sDataString,function(result){GetDomainManageHTMLSuccess(result,ctrl)},null)}function GetDomainManageHTMLSuccess(result,caller){var divListPopup=GDEvent.get("divListPopup"),jqObj=$(caller),newHTML,reqObj;result.Success?(newHTML=result.HTML,newHTML&&newHTML!=""&&(Validation.updateInnerHTML(divListPopup,newHTML),reqObj=$(divListPopup),$(caller).addClass("menuOpen"),reqObj.sfContext({anchor:$(caller),width:220,positionIdeal:"tl",autoOpen:!0,onClose:function(){$(this).sfContext("destroy"),$(caller).removeClass("menuOpen")},onOpen:function(){BindFastballEventsForListPopup()},onItemClick:function(contextElement,index,liElement){var jsAction=liElement.attr("actionjs"),uniqueID=liElement.parent().attr("uniqueId"),fn;if(jsAction&&uniqueID&&!liElement.hasClass("s-disabled"))fn=null,fn=typeof window[jsAction]!="undefined"?window[jsAction]:new Function(jsAction),SelectOnlyThisID(uniqueID,fn);else return!1}}))):result.ValidUser||GoToLogin()}function ShowOffersPopup(ctrl){var rowID,input,sDataString;FastballFromCtrl(ctrl),rowID=GetRowDomainID(ctrl),input={},input.domainid=rowID,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/GetDomainOffersHTML",sDataString,function(result){GetDomainOffersHTMLSuccess(result,ctrl)},null)}function GetDomainOffersHTMLSuccess(result,caller){var divListPopup=GDEvent.get("divListPopup"),jqObj=$(caller),newHTML,reqObj;result.Success?(newHTML=result.HTML,Validation.updateInnerHTML(divListPopup,newHTML),reqObj=$(divListPopup),$(caller).addClass("menuOpen"),reqObj.sfContext({anchor:$(caller),width:220,positionIdeal:"tl",autoOpen:!0,onClose:function(){$(this).sfContext("destroy"),$(caller).removeClass("menuOpen")},onOpen:function(){BindFastballEventsForListPopup()},onItemClick:function(contextElement,index,liElement){var jsAction=$(liElement).attr("actionjs"),uniqueID=$(liElement).parent().attr("uniqueId"),fn;jsAction&&uniqueID&&(fn=null,fn=typeof window[jsAction]!="undefined"?window[jsAction]:new Function(jsAction),SelectOnlyThisID(uniqueID,fn))}})):result.ValidUser||GoToLogin()}function CloseFilterPopup(){$("#divFilterPopup").sfContext("close")}function CloseOfferPopup(){$("#divListPopup").sfContext("close")}function ShowDBPWebSite(){}function ShowAuctionsPage(){}function ShowBRPage(){}function CheckCDStatus(ctrl){var bSuccess=UpdatePageWithOffer(ctrl);bSuccess}function ManagePremiumListing(ctrl){var bSuccess=UpdatePageWithOffer(ctrl);bSuccess}function ShowCPSettings(ctrl){var bSuccess=UpdatePageWithOffer(ctrl);bSuccess}function ShowAppraisal(ctrl){var bSuccess=UpdatePageWithOffer(ctrl);bSuccess}function RunWithCtrlAtt(ctrl){var attRowID=ctrl.getAttribute("ident"),attAction=ctrl.getAttribute("action");SelectOnlyThisID(attRowID,RunHashJS,attAction)}function SelectOnlyThisRow(ctrl,callback,params,extra){var rowID=GetRowDomainID(ctrl);SelectOnlyThisID(rowID,callback,params,extra)}function SelectOnlyThisID(rowID,callback,params,extra){var curControl=$(".listCheckBox[value='"+rowID+"']"),eligibleActionList,updateXml;curControl!=null&&curControl.length>0&&(eligibleActionList=curControl[0].getAttribute("itemStatus"),bAllowCheckEvent=!1,UpdateCheckBoxes(!1),bAllowCheckEvent=!0,Env.is_ie&&Env.minor<=8?(curControl.prop("checked",!0),AltCheckBoxClick(null,curControl[0])):curControl.click(),updateXml=Validation.buildParamNodeListStartTag(),updateXml+='<REQUEST type="'+GetActiveView()+'" >',updateXml+='<BASE unSelectAll="true" />',updateXml+='<SELECTION resource="'+rowID+'" checked="true" type="'+GetActiveView()+'" actionList="'+eligibleActionList+'" />',updateXml+="</REQUEST>",updateXml+=Validation.buildParamNodeListEndTag(),UpdateSelectResourcesWS(updateXml,callback,params,extra))}function SelectAndRun(ctrl,key,extra){FastballFromCtrl(ctrl),SelectOnlyThisRow(ctrl,RunHashJS,key,extra)}function RunHashJS(key,extra){var sJS=hashActionJS[key],iCount;if(sJS!=""){if(extra&&extra instanceof Array)for(iCount=0;iCount<extra.length;iCount++)sJS=sJS.replace("{"+iCount+"}",extra[iCount]);setTimeout(sJS,0)}}function ShowFilter(ctrl){var fieldID=ctrl.getAttribute("field"),input,sDataString;fieldID!=null&&(FastballFromCtrl(ctrl),input={},input.activeview=GetActiveView(),input.field=fieldID,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/GetSelectedFilter",sDataString,function(data){GetSelectedFilterSuccess(data,ctrl,fieldID)},null))}function GetSelectedFilterSuccess(result,ctrl,fieldID){var divFilterPopup,searchHTML,reqObj,reqWidth;result.Success?(divFilterPopup=GDEvent.get("divFilterPopup"),searchHTML=result.HTML,Validation.updateInnerHTML(divFilterPopup,searchHTML),reqObj=$(divFilterPopup),reqWidth=150,fieldID=="expire"&&(reqWidth=260),reqObj.sfContext({anchor:$(ctrl),width:reqWidth,positionIdeal:"ur",autoOpen:!0,destroyOnClose:!0,zIndex:10000010,onOpen:function(){BindFastballEventsForFilterPopup();if(fieldID=="expire"){var requestMaxDate=$("#tbFilterDateTo").val(),requestMinDate=$("#tbFilterDateFrom").val();$("#tbFilterDateFrom").sfDatePicker({dateOverride:requestMinDate,zIndex:10000020}),$("#tbFilterDateTo").sfDatePicker({dateOverride:requestMaxDate,zIndex:10000020})}}})):result.ValidUser||GoToLogin()}function UpdateSelectAllFilter(){var allChkBoxes=$('.flyoutMenuContent div input[value!="-1"]'),allClickBoxes=$('.flyoutMenuContent div input[value!="-1"]:checked'),selAllBox=$('.flyoutMenuContent div input[value="-1"]');allClickBoxes.length==allChkBoxes.length?selAllBox.prop("checked",!0):selAllBox.prop("checked",!1)}function SelectAllFilters(ctrl){var allClickBoxes=$('.flyoutMenuContent div input[value!="-1"]');allClickBoxes.prop("checked",ctrl.checked)}function UpdateFilter(ctrl){var fieldID=ctrl.getAttribute("field"),selType=ctrl.getAttribute("selType"),input,chkBox,allBox,sList,iMultiCount,checkedBox,chkVal;if(fieldID!=null){input={},input.activeview=GetActiveView(),input.action="FIRST";switch(selType){case"bit":chkBox=$(".flyoutMenuContent div input:checked"),chkBox.length==2?input[fieldID]="-1":chkBox.length==1?(chkVal=$(chkBox[0]).val(),input[fieldID]=chkVal):input[fieldID]="-1";break;case"multi":checkedBox=$(".flyoutMenuContent div input:checked"),allBox=$(".flyoutMenuContent div input");if(checkedBox.length!=0&&checkedBox.length!=allBox.length&&(checkedBox.length!=allBox.length-1||allBox[0].checked)){for(sList="",iMultiCount=0;iMultiCount<checkedBox.length;iMultiCount++){chkVal=$(checkedBox[iMultiCount]).val();if(chkVal=="-1"){sList="-1";break}else sList+=chkVal+"|"}input[fieldID]=sList}else input[fieldID]="-1";break;case"single":checkedBox=$(".flyoutMenuContent div input:checked"),chkVal=$(checkedBox[0]).val(),input[fieldID]=chkVal;break;case"range":fieldID=="expire"&&(input.expiretype="1",input.expirestart=$("#tbFilterDateFrom").val(),input.expireend=$("#tbFilterDateTo").val())}CloseFilterPopup(),SendRequestForDomainList(input)}}function RefreshFolderList(){var folderMenu=GetFolderMenuID(),requestData={},request;requestData.foldermenu=folderMenu,request="'request':'{0}'".format(StringifyObject(requestData)),BaseWSCall("SecondaryWS.asmx/GetFolderList",request,GetFolderListComplete)}function GetFolderListComplete(result){if(result.Success){var divAllFolders=GDEvent.get("divAllFolders");Validation.updateInnerHTML(divAllFolders,result.HTML),LoadJMenus()}}function RefreshProfileList(){var profileMenu=GetProfileMenuID(),requestData={},request;requestData.profileMenu=profileMenu,request="'request':'{0}'".format(StringifyObject(requestData)),BaseWSCall("SecondaryWS.asmx/GetProfileList",request,GetProfileListComplete)}function GetProfileListComplete(result){if(result.Success){var divAllProfiles=GDEvent.get("divAllProfiles");Validation.updateInnerHTML(divAllProfiles,result.HTML),LoadJMenus()}}function BindFastballEventsForList(){window.Fastball&&$(".gridHolder *[fastball=event]").Fastball("event")}function BindFastballEventsForFilterPopup(){window.Fastball&&$("#divFilterPopup *[fastball=event]").Fastball("event")}function BindFastballEventsForListPopup(){window.Fastball&&$("#divListPopup *[fastball=event]").Fastball("event")}function MainScrollerHasScroll(){return AreaHasScroll($("#main_scroller"))}function AreaHasScroll(divArea){var gridWidth=divArea.width(),gridHeight=divArea.height(),contObj=$(divArea.children()[0]),contWidth=contObj.width(),contHeight=contObj.height(),bHasVScroll=contHeight>gridHeight,bHasHScroll=contWidth>gridWidth;return{vertical:bHasVScroll,horizontal:bHasHScroll}}function LoadListSnapshot(){var offerDivs=$("div[offers]"),newMenuObj=$(".domainListSnapshot");offerDivs.hover(function(e){var topOffset=$(this).offset().top,leftOffset=$(this).offset().left,objHeight=$(this).height(),relObj=null;relObj=e.toElement?e.toElement:e.currentTarget,delayHoverOfferID=setTimeout(function(){DelayOpenContext(newMenuObj,topOffset,leftOffset,objHeight,relObj)},500)},function(){delayHoverOfferID>0?(clearTimeout(delayHoverOfferID),delayHoverOfferID=0):closeOfferTimerID=setTimeout(function(){DelayCloseContext(newMenuObj)},500)}),newMenuObj.hover(function(){closeOfferTimerID>0&&(clearTimeout(closeOfferTimerID),delayHoverOfferID=0)},function(evt){if(Env.is_ie&&Env.minor<=7){var ctrlPos=newMenuObj.offset(),ctlHeight=newMenuObj.height(),ctlWidth=newMenuObj.width();evt.pageX>ctrlPos.left&&evt.pageY>ctrlPos.top&&evt.pageX<ctrlPos.left+ctlWidth&&evt.pageY<ctrlPos.top+ctlHeight||DelayCloseContext(newMenuObj)}else DelayCloseContext(newMenuObj)})}function DelayOpenContext(menuObj,topOffset,leftOffset,objHeight,referringObject){var chkWidth,chkHeight,liObjects,bShowOffer,iCount,attOffer,secLink;delayHoverOfferID=0,chkWidth=menuObj.width(),chkHeight=menuObj.height(),chkWidth>0&&(contentWidth=chkWidth+30);var lblHeaderOffer=GDEvent.get("lblHeaderOffer"),lblNoffer=GDEvent.get("lblNoffer"),parentRow=$(referringObject).closest("tr.listRow"),chkBox=parentRow.find("input.listCheckBox"),rowValue=chkBox.attr("value"),offerStr=referringObject.getAttribute("offers"),parseObj=jQuery.parseJSON(offerStr),baseUL=menuObj.find("ul.offer-menu-icns");for(baseUL.attr("curValue",rowValue),liObjects=menuObj.find("li"),bShowOffer=!1,iCount=0;iCount<liObjects.length;iCount++){attOffer=liObjects[iCount].getAttribute("offerid");switch(attOffer){case"pr":bShowOffer=ShowSection(parseObj.pr,liObjects[iCount])||bShowOffer;break;case"ep":bShowOffer=ShowSection(parseObj.ep,liObjects[iCount])||bShowOffer;break;case"cd":bShowOffer=ShowSection(parseObj.cd,liObjects[iCount])||bShowOffer;break;case"pd":bShowOffer=ShowSection(parseObj.pd,liObjects[iCount])||bShowOffer;break;case"cp":bShowOffer=ShowSection(parseObj.cp,liObjects[iCount])||bShowOffer;break;case"ga":bShowOffer=ShowSection(parseObj.ga,liObjects[iCount])||bShowOffer;break;case"br":bShowOffer=ShowSection(parseObj.br,liObjects[iCount])||bShowOffer,typeof parseObj.br!="undefined"&&typeof parseObj.br.id!="undefined"&&(secLink=$(liObjects[iCount]).find("a"),secLink.attr("brid",parseObj.br.id))}}bShowOffer?(lblHeaderOffer.style.display="",lblNoffer.style.display="none"):(lblHeaderOffer.style.display="none",lblNoffer.style.display=""),menuObj.sfContext({anchor:$(referringObject),positionIdeal:"tl",width:contentWidth,autoOpen:!1,onClose:function(){$(this).sfContext("destroy")}}),menuObj.sfContext("open")}function ShowSection(att,section){var onChk=$(section).find('span[status="on"]'),offChk=$(section).find('span[status="off"]'),alertChk=$(section).find('span[status="alert"]'),secLink=$(section).find("a"),bShowSection=!1;return typeof att!="undefined"&&typeof att.c!="undefined"?(section.style.display="",onChk[0].style.display=att.c=="a"?"":"none",offChk[0].style.display=att.c=="d"?"":"none",alertChk[0].style.display=att.c=="n"?"":"none",secLink.attr("action",att.a),bShowSection=!0):(secLink.attr("action","0"),section.style.display="none"),bShowSection}function DelayCloseContext(menuObj){clearTimeout(closeOfferTimerID),closeTimerID=0,menuObj.sfContext("close")}function DoOfferAction(ctrl){var newMenuObj=$(".domainListSnapshot"),attVal=$(ctrl).attr("action"),mainUL=$(ctrl).closest("ul.offer-menu-icns"),curValue=mainUL.attr("curValue"),selAction=$(ctrl).attr("action"+attVal);SelectOnlyThisID(curValue,function(){if(selAction!="")if(typeof window[selAction]!="undefined")window[selAction](ctrl);else{var fn=new Function(selAction);fn()}DelayCloseContext(newMenuObj)})}function ShowBusRegPage(ctrl){var reqId=$(ctrl).attr("brid"),sRequest=sTemplateBusReg.format(reqId);LoadRequestPage(sRequest)}function GetLinkStatus(){}function ShowLockHelp(){}function HideListHelp(){}function SetShopperPreference(id,value){var input={},sDataString;input.id=id,input.value=value,sDataString="'request':'{0}'".format(StringifyObject(input)),BaseWSCall("SecondaryWS.asmx/SetShopperPreference",sDataString,function(){},null)}var bUpdatingSelectCount=!1,bIsfiltered=!1,bAllowCheckEvent=!0,delayHoverOfferID=0,closeOfferTimerID=0,contentWidth=0